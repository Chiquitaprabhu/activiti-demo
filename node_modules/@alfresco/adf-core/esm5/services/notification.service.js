/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/*!
 * @license
 * Copyright 2019 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
import { Injectable } from '@angular/core';
import { MatSnackBar } from '@angular/material';
import { TranslationService } from './translation.service';
import { AppConfigService, AppConfigValues } from '../app-config/app-config.service';
import { Subject } from 'rxjs';
import * as i0 from "@angular/core";
import * as i1 from "@angular/material/snack-bar";
import * as i2 from "./translation.service";
import * as i3 from "../app-config/app-config.service";
var NotificationService = /** @class */ (function () {
    function NotificationService(snackBar, translationService, appConfigService) {
        this.snackBar = snackBar;
        this.translationService = translationService;
        this.appConfigService = appConfigService;
        this.DEFAULT_DURATION_MESSAGE = 5000;
        this.messages = new Subject();
        this.DEFAULT_DURATION_MESSAGE = this.appConfigService.get(AppConfigValues.NOTIFY_DURATION) || this.DEFAULT_DURATION_MESSAGE;
    }
    /**
     * Opens a SnackBar notification to show a message.
     * @param message The message (or resource key) to show.
     * @param config Time before notification disappears after being shown or MatSnackBarConfig object
     * @returns Information/control object for the SnackBar
     */
    /**
     * Opens a SnackBar notification to show a message.
     * @param {?} message The message (or resource key) to show.
     * @param {?=} config Time before notification disappears after being shown or MatSnackBarConfig object
     * @return {?} Information/control object for the SnackBar
     */
    NotificationService.prototype.openSnackMessage = /**
     * Opens a SnackBar notification to show a message.
     * @param {?} message The message (or resource key) to show.
     * @param {?=} config Time before notification disappears after being shown or MatSnackBarConfig object
     * @return {?} Information/control object for the SnackBar
     */
    function (message, config) {
        if (!config) {
            config = this.DEFAULT_DURATION_MESSAGE;
        }
        /** @type {?} */
        var translatedMessage = this.translationService.instant(message);
        if (typeof config === 'number') {
            config = {
                duration: config
            };
        }
        this.messages.next({ message: translatedMessage, dateTime: new Date });
        return this.snackBar.open(translatedMessage, null, config);
    };
    /**
     * Opens a SnackBar notification with a message and a response button.
     * @param message The message (or resource key) to show.
     * @param action Caption for the response button
     * @param config Time before notification disappears after being shown or MatSnackBarConfig object
     * @returns Information/control object for the SnackBar
     */
    /**
     * Opens a SnackBar notification with a message and a response button.
     * @param {?} message The message (or resource key) to show.
     * @param {?} action Caption for the response button
     * @param {?=} config Time before notification disappears after being shown or MatSnackBarConfig object
     * @return {?} Information/control object for the SnackBar
     */
    NotificationService.prototype.openSnackMessageAction = /**
     * Opens a SnackBar notification with a message and a response button.
     * @param {?} message The message (or resource key) to show.
     * @param {?} action Caption for the response button
     * @param {?=} config Time before notification disappears after being shown or MatSnackBarConfig object
     * @return {?} Information/control object for the SnackBar
     */
    function (message, action, config) {
        if (!config) {
            config = this.DEFAULT_DURATION_MESSAGE;
        }
        /** @type {?} */
        var translatedMessage = this.translationService.instant(message);
        if (typeof config === 'number') {
            config = {
                duration: config
            };
        }
        this.messages.next({ message: translatedMessage, dateTime: new Date });
        return this.snackBar.open(translatedMessage, action, config);
    };
    /**
     *  dismiss the notification snackbar
     */
    /**
     *  dismiss the notification snackbar
     * @return {?}
     */
    NotificationService.prototype.dismissSnackMessageAction = /**
     *  dismiss the notification snackbar
     * @return {?}
     */
    function () {
        return this.snackBar.dismiss();
    };
    /**
     * @protected
     * @param {?} message
     * @param {?} panelClass
     * @param {?=} action
     * @return {?}
     */
    NotificationService.prototype.showMessage = /**
     * @protected
     * @param {?} message
     * @param {?} panelClass
     * @param {?=} action
     * @return {?}
     */
    function (message, panelClass, action) {
        message = this.translationService.instant(message);
        this.messages.next({ message: message, dateTime: new Date });
        return this.snackBar.open(message, action, {
            duration: this.DEFAULT_DURATION_MESSAGE,
            panelClass: panelClass
        });
    };
    /**
     * Rase error message
     * @param message Text message or translation key for the message.
     * @param action Action name
     */
    /**
     * Rase error message
     * @param {?} message Text message or translation key for the message.
     * @param {?=} action Action name
     * @return {?}
     */
    NotificationService.prototype.showError = /**
     * Rase error message
     * @param {?} message Text message or translation key for the message.
     * @param {?=} action Action name
     * @return {?}
     */
    function (message, action) {
        return this.showMessage(message, 'adf-error-snackbar', action);
    };
    /**
     * Rase info message
     * @param message Text message or translation key for the message.
     * @param action Action name
     */
    /**
     * Rase info message
     * @param {?} message Text message or translation key for the message.
     * @param {?=} action Action name
     * @return {?}
     */
    NotificationService.prototype.showInfo = /**
     * Rase info message
     * @param {?} message Text message or translation key for the message.
     * @param {?=} action Action name
     * @return {?}
     */
    function (message, action) {
        return this.showMessage(message, 'adf-info-snackbar', action);
    };
    /**
     * Rase warning message
     * @param message Text message or translation key for the message.
     * @param action Action name
     */
    /**
     * Rase warning message
     * @param {?} message Text message or translation key for the message.
     * @param {?=} action Action name
     * @return {?}
     */
    NotificationService.prototype.showWarning = /**
     * Rase warning message
     * @param {?} message Text message or translation key for the message.
     * @param {?=} action Action name
     * @return {?}
     */
    function (message, action) {
        return this.showMessage(message, 'adf-warning-snackbar', action);
    };
    NotificationService.decorators = [
        { type: Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    NotificationService.ctorParameters = function () { return [
        { type: MatSnackBar },
        { type: TranslationService },
        { type: AppConfigService }
    ]; };
    /** @nocollapse */ NotificationService.ngInjectableDef = i0.defineInjectable({ factory: function NotificationService_Factory() { return new NotificationService(i0.inject(i1.MatSnackBar), i0.inject(i2.TranslationService), i0.inject(i3.AppConfigService)); }, token: NotificationService, providedIn: "root" });
    return NotificationService;
}());
export { NotificationService };
if (false) {
    /** @type {?} */
    NotificationService.prototype.DEFAULT_DURATION_MESSAGE;
    /** @type {?} */
    NotificationService.prototype.messages;
    /**
     * @type {?}
     * @private
     */
    NotificationService.prototype.snackBar;
    /**
     * @type {?}
     * @private
     */
    NotificationService.prototype.translationService;
    /**
     * @type {?}
     * @private
     */
    NotificationService.prototype.appConfigService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm90aWZpY2F0aW9uLnNlcnZpY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AYWxmcmVzY28vYWRmLWNvcmUvIiwic291cmNlcyI6WyJzZXJ2aWNlcy9ub3RpZmljYXRpb24uc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWlCQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzNDLE9BQU8sRUFBRSxXQUFXLEVBQXFDLE1BQU0sbUJBQW1CLENBQUM7QUFDbkYsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDM0QsT0FBTyxFQUFFLGdCQUFnQixFQUFFLGVBQWUsRUFBRSxNQUFNLGtDQUFrQyxDQUFDO0FBQ3JGLE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxNQUFNLENBQUM7Ozs7O0FBRy9CO0lBU0ksNkJBQW9CLFFBQXFCLEVBQ3JCLGtCQUFzQyxFQUN0QyxnQkFBa0M7UUFGbEMsYUFBUSxHQUFSLFFBQVEsQ0FBYTtRQUNyQix1QkFBa0IsR0FBbEIsa0JBQWtCLENBQW9CO1FBQ3RDLHFCQUFnQixHQUFoQixnQkFBZ0IsQ0FBa0I7UUFOdEQsNkJBQXdCLEdBQVcsSUFBSSxDQUFDO1FBRXhDLGFBQVEsR0FBK0IsSUFBSSxPQUFPLEVBQUUsQ0FBQztRQUtqRCxJQUFJLENBQUMsd0JBQXdCLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixDQUFDLEdBQUcsQ0FBUyxlQUFlLENBQUMsZUFBZSxDQUFDLElBQUksSUFBSSxDQUFDLHdCQUF3QixDQUFDO0lBRXhJLENBQUM7SUFFRDs7Ozs7T0FLRzs7Ozs7OztJQUNILDhDQUFnQjs7Ozs7O0lBQWhCLFVBQWlCLE9BQWUsRUFBRSxNQUFtQztRQUNqRSxJQUFJLENBQUMsTUFBTSxFQUFFO1lBQ1QsTUFBTSxHQUFHLElBQUksQ0FBQyx3QkFBd0IsQ0FBQztTQUMxQzs7WUFFSyxpQkFBaUIsR0FBRyxJQUFJLENBQUMsa0JBQWtCLENB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RDs7Ozs7SUFFekMsdUNBQTZCOzs7OztJQUM3QixpREFBOEM7Ozs7O0lBQzlDLCtDQUEwQyIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE1hdFNuYWNrQmFyLCBNYXRTbmFja0JhclJlZiwgTWF0U25hY2tCYXJDb25maWcgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbCc7XG5pbXBvcnQgeyBUcmFuc2xhdGlvblNlcnZpY2UgfSBmcm9tICcuL3RyYW5zbGF0aW9uLnNlcnZpY2UnO1xuaW1wb3J0IHsgQXBwQ29uZmlnU2VydmljZSwgQXBwQ29uZmlnVmFsdWVzIH0gZnJvbSAnLi4vYXBwLWNvbmZpZy9hcHAtY29uZmlnLnNlcnZpY2UnO1xuaW1wb3J0IHsgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgTm90aWZpY2F0aW9uTW9kZWwgfSBmcm9tICcuLi9tb2RlbHMvbm90aWZpY2F0aW9uLm1vZGVsJztcblxuQEluamVjdGFibGUoe1xuICAgIHByb3ZpZGVkSW46ICdyb290J1xufSlcbmV4cG9ydCBjbGFzcyBOb3RpZmljYXRpb25TZXJ2aWNlIHtcblxuICAgIERFRkFVTFRfRFVSQVRJT05fTUVTU0FHRTogbnVtYmVyID0gNTAwMDtcblxuICAgIG1lc3NhZ2VzOiBTdWJqZWN0PE5vdGlmaWNhdGlvbk1vZGVsPiA9IG5ldyBTdWJqZWN0KCk7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHNuYWNrQmFyOiBNYXRTbmFja0JhcixcbiAgICAgICAgICAgICAgICBwcml2YXRlIHRyYW5zbGF0aW9uU2VydmljZTogVHJhbnNsYXRpb25TZXJ2aWNlLFxuICAgICAgICAgICAgICAgIHByaXZhdGUgYXBwQ29uZmlnU2VydmljZTogQXBwQ29uZmlnU2VydmljZSkge1xuICAgICAgICB0aGlzLkRFRkFVTFRfRFVSQVRJT05fTUVTU0FHRSA9IHRoaXMuYXBwQ29uZmlnU2VydmljZS5nZXQ8bnVtYmVyPihBcHBDb25maWdWYWx1ZXMuTk9USUZZX0RVUkFUSU9OKSB8fCB0aGlzLkRFRkFVTFRfRFVSQVRJT05fTUVTU0FHRTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE9wZW5zIGEgU25hY2tCYXIgbm90aWZpY2F0aW9uIHRvIHNob3cgYSBtZXNzYWdlLlxuICAgICAqIEBwYXJhbSBtZXNzYWdlIFRoZSBtZXNzYWdlIChvciByZXNvdXJjZSBrZXkpIHRvIHNob3cuXG4gICAgICogQHBhcmFtIGNvbmZpZyBUaW1lIGJlZm9yZSBub3RpZmljYXRpb24gZGlzYXBwZWFycyBhZnRlciBiZWluZyBzaG93biBvciBNYXRTbmFja0JhckNvbmZpZyBvYmplY3RcbiAgICAgKiBAcmV0dXJucyBJbmZvcm1hdGlvbi9jb250cm9sIG9iamVjdCBmb3IgdGhlIFNuYWNrQmFyXG4gICAgICovXG4gICAgb3BlblNuYWNrTWVzc2FnZShtZXNzYWdlOiBzdHJpbmcsIGNvbmZpZz86IG51bWJlciB8IE1hdFNuYWNrQmFyQ29uZmlnKTogTWF0U25hY2tCYXJSZWY8YW55PiB7XG4gICAgICAgIGlmICghY29uZmlnKSB7XG4gICAgICAgICAgICBjb25maWcgPSB0aGlzLkRFRkFVTFRfRFVSQVRJT05fTUVTU0FHRTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHRyYW5zbGF0ZWRNZXNzYWdlID0gdGhpcy50cmFuc2xhdGlvblNlcnZpY2UuaW5zdGFudChtZXNzYWdlKTtcblxuICAgICAgICBpZiAodHlwZW9mIGNvbmZpZyA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIGNvbmZpZyA9IHtcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogY29uZmlnXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5tZXNzYWdlcy5uZXh0KHsgbWVzc2FnZTogdHJhbnNsYXRlZE1lc3NhZ2UsIGRhdGVUaW1lOiBuZXcgRGF0ZSB9KTtcblxuICAgICAgICByZXR1cm4gdGhpcy5zbmFja0Jhci5vcGVuKHRyYW5zbGF0ZWRNZXNzYWdlLCBudWxsLCBjb25maWcpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE9wZW5zIGEgU25hY2tCYXIgbm90aWZpY2F0aW9uIHdpdGggYSBtZXNzYWdlIGFuZCBhIHJlc3BvbnNlIGJ1dHRvbi5cbiAgICAgKiBAcGFyYW0gbWVzc2FnZSBUaGUgbWVzc2FnZSAob3IgcmVzb3VyY2Uga2V5KSB0byBzaG93LlxuICAgICAqIEBwYXJhbSBhY3Rpb24gQ2FwdGlvbiBmb3IgdGhlIHJlc3BvbnNlIGJ1dHRvblxuICAgICAqIEBwYXJhbSBjb25maWcgVGltZSBiZWZvcmUgbm90aWZpY2F0aW9uIGRpc2FwcGVhcnMgYWZ0ZXIgYmVpbmcgc2hvd24gb3IgTWF0U25hY2tCYXJDb25maWcgb2JqZWN0XG4gICAgICogQHJldHVybnMgSW5mb3JtYXRpb24vY29udHJvbCBvYmplY3QgZm9yIHRoZSBTbmFja0JhclxuICAgICAqL1xuICAgIG9wZW5TbmFja01lc3NhZ2VBY3Rpb24obWVzc2FnZTogc3RyaW5nLCBhY3Rpb246IHN0cmluZywgY29uZmlnPzogbnVtYmVyIHwgTWF0U25hY2tCYXJDb25maWcpOiBNYXRTbmFja0JhclJlZjxhbnk+IHtcbiAgICAgICAgaWYgKCFjb25maWcpIHtcbiAgICAgICAgICAgIGNvbmZpZyA9IHRoaXMuREVGQVVMVF9EVVJBVElPTl9NRVNTQUdFO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdHJhbnNsYXRlZE1lc3NhZ2UgPSB0aGlzLnRyYW5zbGF0aW9uU2VydmljZS5pbnN0YW50KG1lc3NhZ2UpO1xuXG4gICAgICAgIGlmICh0eXBlb2YgY29uZmlnID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgY29uZmlnID0ge1xuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBjb25maWdcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm1lc3NhZ2VzLm5leHQoeyBtZXNzYWdlOiB0cmFuc2xhdGVkTWVzc2FnZSwgZGF0ZVRpbWU6IG5ldyBEYXRlIH0pO1xuXG4gICAgICAgIHJldHVybiB0aGlzLnNuYWNrQmFyLm9wZW4odHJhbnNsYXRlZE1lc3NhZ2UsIGFjdGlvbiwgY29uZmlnKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiAgZGlzbWlzcyB0aGUgbm90aWZpY2F0aW9uIHNuYWNrYmFyXG4gICAgICovXG4gICAgZGlzbWlzc1NuYWNrTWVzc2FnZUFjdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc25hY2tCYXIuZGlzbWlzcygpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBzaG93TWVzc2FnZShtZXNzYWdlOiBzdHJpbmcsIHBhbmVsQ2xhc3M6IHN0cmluZywgYWN0aW9uPzogc3RyaW5nKTogTWF0U25hY2tCYXJSZWY8YW55PiB7XG4gICAgICAgIG1lc3NhZ2UgPSB0aGlzLnRyYW5zbGF0aW9uU2VydmljZS5pbnN0YW50KG1lc3NhZ2UpO1xuXG4gICAgICAgIHRoaXMubWVzc2FnZXMubmV4dCh7IG1lc3NhZ2U6IG1lc3NhZ2UsIGRhdGVUaW1lOiBuZXcgRGF0ZSB9KTtcblxuICAgICAgICByZXR1cm4gdGhpcy5zbmFja0Jhci5vcGVuKG1lc3NhZ2UsIGFjdGlvbiwge1xuICAgICAgICAgICAgZHVyYXRpb246IHRoaXMuREVGQVVMVF9EVVJBVElPTl9NRVNTQUdFLFxuICAgICAgICAgICAgcGFuZWxDbGFzc1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSYXNlIGVycm9yIG1lc3NhZ2VcbiAgICAgKiBAcGFyYW0gbWVzc2FnZSBUZXh0IG1lc3NhZ2Ugb3IgdHJhbnNsYXRpb24ga2V5IGZvciB0aGUgbWVzc2FnZS5cbiAgICAgKiBAcGFyYW0gYWN0aW9uIEFjdGlvbiBuYW1lXG4gICAgICovXG4gICAgc2hvd0Vycm9yKG1lc3NhZ2U6IHN0cmluZywgYWN0aW9uPzogc3RyaW5nKTogTWF0U25hY2tCYXJSZWY8YW55PiB7XG4gICAgICAgIHJldHVybiB0aGlzLnNob3dNZXNzYWdlKG1lc3NhZ2UsICdhZGYtZXJyb3Itc25hY2tiYXInLCBhY3Rpb24pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJhc2UgaW5mbyBtZXNzYWdlXG4gICAgICogQHBhcmFtIG1lc3NhZ2UgVGV4dCBtZXNzYWdlIG9yIHRyYW5zbGF0aW9uIGtleSBmb3IgdGhlIG1lc3NhZ2UuXG4gICAgICogQHBhcmFtIGFjdGlvbiBBY3Rpb24gbmFtZVxuICAgICAqL1xuICAgIHNob3dJbmZvKG1lc3NhZ2U6IHN0cmluZywgYWN0aW9uPzogc3RyaW5nKTogTWF0U25hY2tCYXJSZWY8YW55PiB7XG4gICAgICAgIHJldHVybiB0aGlzLnNob3dNZXNzYWdlKG1lc3NhZ2UsICdhZGYtaW5mby1zbmFja2JhcicsIGFjdGlvbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmFzZSB3YXJuaW5nIG1lc3NhZ2VcbiAgICAgKiBAcGFyYW0gbWVzc2FnZSBUZXh0IG1lc3NhZ2Ugb3IgdHJhbnNsYXRpb24ga2V5IGZvciB0aGUgbWVzc2FnZS5cbiAgICAgKiBAcGFyYW0gYWN0aW9uIEFjdGlvbiBuYW1lXG4gICAgICovXG4gICAgc2hvd1dhcm5pbmcobWVzc2FnZTogc3RyaW5nLCBhY3Rpb24/OiBzdHJpbmcpOiBNYXRTbmFja0JhclJlZjxhbnk+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2hvd01lc3NhZ2UobWVzc2FnZSwgJ2FkZi13YXJuaW5nLXNuYWNrYmFyJywgYWN0aW9uKTtcbiAgICB9XG59XG4iXX0=